import{c as J,j as t,a as Q}from"./app-DN_9ot8U.js";import{B as G}from"./index-DRuVligk.js";import{a as W,o as H,u as X,j as Y,F as L,b as Z,_ as ee,s as r,i as te,d as A,e as R,f as $,g as O}from"./schemas-CMQm24yx.js";import{I as U}from"./input-B-07HMWa.js";import{M as se}from"./md-editor-field-Bv4Y_yu7.js";import{U as oe}from"./index-DXU_xaDQ.js";import{c as le}from"./createLucideIcon-BuNKz-nL.js";import{T as re}from"./trash-2-eBIaDG8-.js";const ie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ne=le("Plus",ie),ae=H({title:r().min(1,"Campo obrigatório"),short_description:r().max(255,"Máximo 255 caracteres"),content:r().min(1,"O conteúdo é obrigatório"),features_raw:r().optional(),plans:te(H({name:r().min(1,"Nome do plano é obrigatório"),link:r().min(1,"Link é obrigatório")})).optional(),coverImage:H({preview:r(),file:ee(File).optional()}).optional()});function Se(l){const e=J.c(59),{data:o}=l;let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F=W(ae),e[0]=F):F=e[0];const V=o?.title??"",z=o?.short_description??"",B=o?.content??"";let i;e[1]!==o?.features_list?(i=o?.features_list?.join(", ")??"",e[1]=o?.features_list,e[2]=i):i=e[2];let n;e[3]!==o?.plans?(n=o?.plans??[],e[3]=o?.plans,e[4]=n):n=e[4];const T=o?.cover_image??"";let a;e[5]!==T?(a={preview:T,file:void 0},e[5]=T,e[6]=a):a=e[6];let w;e[7]!==V||e[8]!==z||e[9]!==B||e[10]!==i||e[11]!==n||e[12]!==a?(w={resolver:F,defaultValues:{title:V,short_description:z,content:B,features_raw:i,plans:n,coverImage:a}},e[7]=V,e[8]=z,e[9]=B,e[10]=i,e[11]=n,e[12]=a,e[13]=w):w=e[13];const s=X(w);let I;e[14]!==s.control?(I={control:s.control,name:"plans"},e[14]=s.control,e[15]=I):I=e[15];const{fields:c,append:K,remove:b}=Y(I);let k;e[16]!==o?(k=function(S){const y=S.features_raw?.split(",").map(ue).filter(pe);Q.post(o?`/admin/services/${o.id}`:"/admin/services",{...S,features_list:y,cover_image:S.coverImage?.file,_method:o?"put":"post"})},e[16]=o,e[17]=k):k=e[17];const q=k;let m;e[18]!==s||e[19]!==q?(m=s.handleSubmit(q),e[18]=s,e[19]=q,e[20]=m):m=e[20];let d;e[21]!==s.control?(d=t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(L,{control:s.control,name:"title",render:fe}),t.jsx(L,{control:s.control,name:"features_raw",render:de})]}),e[21]=s.control,e[22]=d):d=e[22];let f;e[23]!==s?(f=t.jsx(oe,{form:s,name:"coverImage",label:"Imagem de Capa do Serviço"}),e[23]=s,e[24]=f):f=e[24];let C;e[25]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("h3",{className:"text-lg font-medium",children:"Planos de Serviço (Opcional)"}),e[25]=C):C=e[25];let p;e[26]!==K?(p=()=>K({name:"",link:""}),e[26]=K,e[27]=p):p=e[27];let P;e[28]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(ne,{className:"mr-2 h-4 w-4"}),e[28]=P):P=e[28];let u;e[29]!==p?(u=t.jsxs("div",{className:"flex items-center justify-between",children:[C,t.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:p,children:[P," Adicionar Plano"]})]}),e[29]=p,e[30]=u):u=e[30];let h;if(e[31]!==c||e[32]!==s.control||e[33]!==b){let N;e[35]!==s.control||e[36]!==b?(N=(S,y)=>t.jsxs("div",{className:"flex items-end gap-4 rounded-lg border bg-gray-50/50 p-4",children:[t.jsxs("div",{className:"grid flex-1 grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(L,{control:s.control,name:`plans.${y}.name`,render:me}),t.jsx(L,{control:s.control,name:`plans.${y}.link`,render:ce})]}),t.jsx(G,{type:"button",variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10 hover:text-destructive",onClick:()=>b(y),children:t.jsx(re,{className:"h-5 w-5"})})]},S.id),e[35]=s.control,e[36]=b,e[37]=N):N=e[37],h=c.map(N),e[31]=c,e[32]=s.control,e[33]=b,e[34]=h}else h=e[34];let x;e[38]!==c.length?(x=c.length===0&&t.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Nenhum plano adicionado. O serviço será exibido sem opções de planos."}),e[38]=c.length,e[39]=x):x=e[39];let j;e[40]!==h||e[41]!==x?(j=t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h,x]}),e[40]=h,e[41]=x,e[42]=j):j=e[42];let g;e[43]!==u||e[44]!==j?(g=t.jsxs("div",{className:"space-y-4 border-t pt-4",children:[u,j]}),e[43]=u,e[44]=j,e[45]=g):g=e[45];const D=o?.content;let _;e[46]!==s||e[47]!==D?(_=t.jsx(se,{form:s,name:"content",label:"Conteúdo Principal",htmlValue:D}),e[46]=s,e[47]=D,e[48]=_):_=e[48];let E;e[49]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(G,{type:"submit",className:"w-full md:w-auto",children:"Salvar Serviço"}),e[49]=E):E=e[49];let v;e[50]!==m||e[51]!==d||e[52]!==f||e[53]!==g||e[54]!==_?(v=t.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d,f,g,_,E]}),e[50]=m,e[51]=d,e[52]=f,e[53]=g,e[54]=_,e[55]=v):v=e[55];let M;return e[56]!==s||e[57]!==v?(M=t.jsx(Z,{...s,children:v}),e[56]=s,e[57]=v,e[58]=M):M=e[58],M}function ce(l){const{field:e}=l;return t.jsxs(A,{children:[t.jsx(R,{children:"Link/URL de Solicitação"}),t.jsx($,{children:t.jsx(U,{placeholder:"https://wa.me/...",...e})}),t.jsx(O,{})]})}function me(l){const{field:e}=l;return t.jsxs(A,{children:[t.jsx(R,{children:"Nome do Plano"}),t.jsx($,{children:t.jsx(U,{placeholder:"Ex: Anual",...e})}),t.jsx(O,{})]})}function de(l){const{field:e}=l;return t.jsxs(A,{children:[t.jsx(R,{children:"Vantagens (separadas por vírgula)"}),t.jsx($,{children:t.jsx(U,{placeholder:"Suporte 24h, Relatórios, etc",...e})}),t.jsx(O,{})]})}function fe(l){const{field:e}=l;return t.jsxs(A,{children:[t.jsx(R,{children:"Nome do Serviço"}),t.jsx($,{children:t.jsx(U,{placeholder:"Ex: Consultoria PPK",...e})}),t.jsx(O,{})]})}function pe(l){return l!==""}function ue(l){return l.trim()}export{Se as C};
