import{c as U,j as t,a as R}from"./app-C3ZLcZrW.js";import{B as V}from"./index-U7aP1YJ6.js";import{C as $}from"./checkbox-QjFaOr8O.js";import{a as z,o as k,u as L,F as T,b as q,c as D,s as _,_ as G,d as A,e as P,f as E,g as w}from"./schemas-DkqE46Vg.js";import{I as B}from"./input-DzWqFSZJ.js";import{M as H}from"./md-editor-field-Cg9dXzC0.js";import{U as J}from"./index-B59d0N1V.js";const K=l=>l.split(",").map(e=>e.trim()).filter(Boolean),O=k({title:_().min(1,"Título obrigatório"),content:_().optional(),tags:_().optional(),coverImage:k({preview:_().nullable().optional(),file:G(File).optional()}).optional(),is_published:D().optional()});function re(l){const e=U.c(39),{data:o}=l;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=z(O),e[0]=u):u=e[0];const v=o?.title??"",F=o?.content??"";let i;e[1]!==o?(i=Array.isArray(o?.tags)?o.tags.join(", "):"",e[1]=o,e[2]=i):i=e[2];const C=o?.cover_image??"";let r;e[3]!==C?(r={preview:C,file:void 0},e[3]=C,e[4]=r):r=e[4];const I=o?.is_published??!1;let x;e[5]!==v||e[6]!==F||e[7]!==i||e[8]!==r||e[9]!==I?(x={resolver:u,defaultValues:{title:v,content:F,tags:i,coverImage:r,is_published:I}},e[5]=v,e[6]=F,e[7]=i,e[8]=r,e[9]=I,e[10]=x):x=e[10];const s=L(x);let h;e[11]!==o?(h=function(b){const M=o?`/admin/posts/${o.id}`:"/admin/posts";R.post(M,{...b,cover_image:b.coverImage?.file,tags:b.tags?K(b.tags):[],_method:o?"put":"post"})},e[11]=o,e[12]=h):h=e[12];const y=h;let a;e[13]!==s||e[14]!==y?(a=s.handleSubmit(y),e[13]=s,e[14]=y,e[15]=a):a=e[15];let n;e[16]!==s.control?(n=t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(T,{control:s.control,name:"title",render:X}),t.jsx(T,{control:s.control,name:"tags",render:W})]}),e[16]=s.control,e[17]=n):n=e[17];let c;e[18]!==s?(c=t.jsx(J,{form:s,name:"coverImage",label:"Imagem de Capa"}),e[18]=s,e[19]=c):c=e[19];let m;e[20]!==s.control?(m=t.jsx(T,{control:s.control,name:"is_published",render:Q}),e[20]=s.control,e[21]=m):m=e[21];let d;e[22]!==c||e[23]!==m?(d=t.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 md:grid-cols-2",children:[c,m]}),e[22]=c,e[23]=m,e[24]=d):d=e[24];const N=o?.content||"";let p;e[25]!==s||e[26]!==N?(p=t.jsx(H,{form:s,name:"content",label:"Conteúdo do Post",htmlValue:N}),e[25]=s,e[26]=N,e[27]=p):p=e[27];const S=o?"Atualizar":"Criar";let f;e[28]!==S?(f=t.jsxs(V,{type:"submit",children:[S," Post"]}),e[28]=S,e[29]=f):f=e[29];let g;e[30]!==a||e[31]!==n||e[32]!==d||e[33]!==p||e[34]!==f?(g=t.jsxs("form",{onSubmit:a,className:"space-y-6",children:[n,d,p,f]}),e[30]=a,e[31]=n,e[32]=d,e[33]=p,e[34]=f,e[35]=g):g=e[35];let j;return e[36]!==s||e[37]!==g?(j=t.jsx(q,{...s,children:g}),e[36]=s,e[37]=g,e[38]=j):j=e[38],j}function Q(l){const{field:e}=l;return t.jsxs(A,{className:"mt-8 flex flex-row items-start space-y-0 space-x-3 rounded-md border p-4",children:[t.jsx(E,{children:t.jsx($,{checked:e.value,onCheckedChange:e.onChange})}),t.jsxs("div",{className:"space-y-1 leading-none",children:[t.jsx(P,{children:"Publicar Agora"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Se marcado, o post ficará visível publicamente."})]})]})}function W(l){const{field:e}=l;return t.jsxs(A,{children:[t.jsx(P,{children:"Tags (separadas por vírgula)"}),t.jsx(E,{children:t.jsx(B,{...e,placeholder:"Notícias, Tecnologia, Update"})}),t.jsx(w,{})]})}function X(l){const{field:e}=l;return t.jsxs(A,{children:[t.jsx(P,{children:"Título do Post"}),t.jsx(E,{children:t.jsx(B,{...e})}),t.jsx(w,{})]})}export{re as C};
